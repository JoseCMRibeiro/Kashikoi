<!DOCTYPE html>
<html>
<head>
  <title>Product Rating Modal</title>
  <style>
    .modal {
      display: none;
      position: fixed;
      z-index: 1;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.4);
    }

    .modal-content {
      background-color: #313131cb;
      margin: 20% auto;
      padding: 20px;
      color: white;
      border: 1px solid white;
      width: 300px;
    }

    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }

    .stars {
      margin-bottom: 20px;
    }

    .star {
      font-size: 24px;
      cursor: pointer;
      color: #131212;
    }

    .star:hover,
    .star.active {
      color: #ffbf00;
    }
  </style>
</head>
<body>

  <div id="myModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Como qualifica este produto?</h2>
      <div class="stars">
        <span class="star" data-rating="1">&#9733;</span>
        <span class="star" data-rating="2">&#9733;</span>
        <span class="star" data-rating="3">&#9733;</span>
        <span class="star" data-rating="4">&#9733;</span>
        <span class="star" data-rating="5">&#9733;</span>
      </div>
      <input type="text" id="nameInput" placeholder="Nome:">
      <textarea id="reviewInput" placeholder="Comentario"></textarea>
      <p></p>
      <button id="submitRating">Submeter</button>
    </div>
  </div>

  <script>



////////////////////////////////////////////////////////////////////////////////////////////////

    // Get the modal element
    const modal = document.getElementById('myModal');    
    modal.style.display = 'block';


    // Get the <span> element that closes the modal
    const closeModalBtn = document.getElementsByClassName('close')[0];

    // Get the submit button
    const submitBtn = document.getElementById('submitRating');

    // Get the selected rating element
    const selectedRating = document.querySelector('.selected-rating');


    // Close the modal when the close button is clicked
    closeModalBtn.addEventListener('click', function() 
    {
      modal.style.display = 'none';
    });

    // Handle star rating selection
    const stars = document.querySelectorAll('.star');
let rating = 0; // Initialize the rating variable

stars.forEach(function(star, index) {
  star.addEventListener('click', function() {
    // Set the rating to the index of the clicked star plus 1
    rating = index + 1;

    // Add the 'active' class to stars up to the selected rating
    for (let i = 0; i < rating; i++) {
      stars[i].classList.add('active');
    }

    // Remove the 'active' class from stars after the selected rating
    for (let i = rating; i < stars.length; i++) {
      stars[i].classList.remove('active');
    }


    // Log the rating
    console.log('Number of Yellow Stars (Rating): ' + rating);
  });
});

    // Handle rating submission
    submitBtn.addEventListener('click', function() 
    {
          const rating = document.querySelector('.star.active');
          const nameInput = document.getElementById('nameInput');
          const reviewInput = document.getElementById('reviewInput');

          if (rating && nameInput.value && reviewInput.value) 
          {
            const selectedRatingValue = rating.getAttribute('data-rating');
            const name = nameInput.value;
            const review = reviewInput.value;
            
            // Send the rating, name, and review data to your server for further processing
            console.log( selectedRatingValue);
            console.log( name);
            console.log(review);
            
            // Reset input fields and close the modal
            nameInput.value = '';
            reviewInput.value = '';
            modal.style.display = 'none';
          } 
          else 
          {
            alert('Por favor preencha todos os campos');
          }
    });
  </script>
</body>
</html>
